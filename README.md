# Бот-помощник, который помогает составить заказ и получить информацию о продукте**

Поиск продуктов происходит по вектору, который строит предобученная модель RuBert
Классификация намерения пользователя происходит за счёт линейной регрессии, обученной на векторах примеров, полученных через Rubert

⚠️ НЕ РЕКОМЕНДУЮ ⚠️
При желании сменить RuBert на ruRoBERTa (трансформерной модели от Сбера), в `./ai-processor/vectorizer.py` заменить `DeepPavlov/rubert-base-cased-sentence` на `sberbank-ai/ruRoberta-large `
⚠️ НЕ РЕКОМЕНДУЮ ⚠️

# Структура
```
├── ai-processor - обработка текста, получение схожих продуктов из бд  
│   ├── classifier.py - классификация намерений, выделение сущностей  
│   ├── main.py - fast-api обработчик запросов  
│   ├── models - здесь будут сохраняться модели  
│   │   └── logistic_regression_model.pkl - своя модель классификации  
│   ├── redis_client.py - работа с сервисом redis  
│   └── vectorizer.py - векторизация сущностей  
├── bot - логика Телеграм бота  
│   ├── postgres.py - работа с сервисом storage  
├── dataloader - загрузка данных из таблицы при запуске  
├── pipeline.ipynb - исследовательский пайплайн  
├── redis - хранилище для векторов  
└── storage - Postgres, хранение названий, описаний и цен продуктов  
    ├── alembic - миграции  
    ├── models.py - модели данных  
```

# Запуск

## Клонирование репозитория

Склонируйте репозиторий командой:
```git clone https://github.com/Alia1804/ProductsHelper_AI-bot```
```cd ./ProductsHelper_AI-bot```

## Запуск через docker-compose

1. Убедитесь, что у вас установлены Docker и Docker Compose.

2. Создайте Telegram бот в `@BotFather`

3. Переименуйте `.example.env` в `.env`  

4. В `.env` скопируйте токен своего бота в  переменную **TELEGRAM_TOKEN**

5. Выполните команду ```docker-compose up --build```

6. После остановки выполните ```docker system prune``` чтобы избежать ошибок в будущем